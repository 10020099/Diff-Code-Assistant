# Diff Code Assistant

**Diff Code Assistant** 是一个桌面实用工具，旨在利用大型语言模型（LLM）的强大功能，简化在代码库中进行大规模、具有上下文感知能力的变更流程。

它提供了一个简单的图形界面，用于选择相关文件、生成全面的上下文，并为 LLM 创建精确的提示，以 `diff` 格式生成代码修改。这种方法允许您通过一个精心设计的指令，在多个文件中应用复杂的更改。


## 功能

- **项目扫描器**: 快速扫描项目目录并显示文件树。
- **选择性上下文构建**: 交互式地选择要包含在 LLM 上下文中的文件和文件夹。
- **上下文生成**: 自动将文件树和文件内容打包成特殊格式的上下文块。
- **提示工程助手**: 帮助您将自然语言指令与生成的上下文相结合。
- **剪贴板集成**: 一键将生成的提示复制到剪贴板。
- **Diff 预览器**: 以颜色编码（绿色表示增加，红色表示删除）的方式可视化 LLM 返回的 `diff`。
- **补丁应用提示生成**: 生成后续提示，指示 LLM 应用 `diff` 并返回完整的、更新后的代码。

## 工作原理

该应用程序遵循一个四步流程，引导您与外部 LLM（例如通过网页界面使用的 GPT-4、Claude 等）进行交互。

1.  **第一步：准备上下文**: 您选择一个项目文件夹。工具会构建一个文件树，您可以对其进行修剪，只包含与任务相关的文件。然后，工具会创建一个包含这些文件结构和内容的上下文块。
2.  **第二步：生成初始提示**: 您为 LLM 编写一条指令（例如，"将 `MyClass` 的所有实例重构为 `NewClass`"）。工具会将其与上下文结合，并将完整的提示复制到您的剪贴板。
3.  **第三步：预览 Diff**: 您将提示粘贴到您选择的 LLM 中，并获取建议更改的 `diff` 作为返回结果。将此 `diff` 粘贴回工具中，以查看高亮显示的、易于阅读的预览。
4.  **第四步：生成最终"应用"提示**: 如果 `diff` 看起来正确，工具会生成一个最终提示，您可以用它来要求 LLM 应用更改并提供修改后文件的完整、更新后的代码。

## 安装

该项目使用标准的 Python 库和 `customtkinter` 来构建 GUI。

1.  克隆仓库:
    ```bash
    git clone https://github.com/10020099/Diff-Code-Assistant.git
    cd diff-code-assistant
    ```

2.  安装依赖:
    ```bash
    pip install -r requirements.txt
    ```

## 使用方法

从项目根目录运行主脚本:

```bash
python main.py
```

按照应用程序选项卡中的四个步骤来生成您的代码修改。

## 许可证

该项目采用 MIT 许可证。有关详细信息，请参阅 `LICENSE` 文件。 
